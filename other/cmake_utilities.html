

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CMake utility functions &mdash; LibraryLink Utilities 3.2.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon-32.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="LibraryLink Utilities 3.2.0 documentation" href="../index.html"/>
        <link rel="prev" title="Use in paclets" href="paclet_use.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> LibraryLink Utilities
          

          
            
            <img src="../_static/LLULogo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Basic Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/how_to_use.html">How to use</a></li>
<li class="toctree-l1"><a class="reference external" href="https://wolframresearch.github.io/LibraryLinkUtilities/doxygen/">API reference (Doxygen ↪)</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/functions.html">Library functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/error_handling.html">Error handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/wstp.html">WSTP support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/managed_expressions.html">Managed expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/logger.html">Logging and debug printing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/progress_monitor.html">Progress monitor</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Notes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="paclet_use.html">Use in paclets</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CMake utility functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#common">Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="#paclet-utilities">Paclet Utilities</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LibraryLink Utilities</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>CMake utility functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cmake-utility-functions">
<h1>CMake utility functions<a class="headerlink" href="#cmake-utility-functions" title="Permalink to this headline"> 🔗</a></h1>
<p>Apart from the C++ and Wolfram Language APIs, LLU offers a range of CMake utility functions to automate common steps in building LibraryLink paclets with CMake.
While it is not at all required to use CMake in a project that links to LLU, it is definitely convenient, as LLU is specifically tailored to be used
by other CMake projects.</p>
<p>When you install LLU, a <code class="file docutils literal notranslate"><span class="pre">cmake</span></code> directory is created in the installation directory, with the following contents:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.
└── cmake
    └── LLU
        ├── Wolfram
<span class="hll">        │   ├── Common.cmake
</span>        │   ├── CVSUtilities.cmake
<span class="hll">        │   └── PacletUtilities.cmake
</span>        ├── FindWolframLanguage.cmake
        ├── FindWolframLibrary.cmake
        ├── FindWSTP.cmake
        ├── LLUConfig.cmake
        ├── LLUConfigVersion.cmake
        └── LLUTargets.cmake
</pre></div>
</div>
<p>Most of these files are used internally by LLU or by CMake in order to get information about LLU installation when you link to it from your project.
However, in the <code class="file docutils literal notranslate"><span class="pre">Wolfram</span></code> subdirectory you will find two files (highlighted) with general purpose utilities which are documented below.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Check out the <a class="reference internal" href="../basic/how_to_use.html#demo-project"><span class="std std-ref">Demo paclet</span></a> to see how some of these utilities can be used in a project.</p>
</div>
<div class="section" id="common">
<h2>Common<a class="headerlink" href="#common" title="Permalink to this headline"> 🔗</a></h2>
<p><code class="file docutils literal notranslate"><span class="pre">cmake/LLU/Wolfram/Common.cmake</span></code> contains a number of small CMake functions and macros that automate common tasks when writing cross-platform CMake code.
Not all of them will be useful in every project so feel free to choose whatever suits your needs.</p>
<dl class="cmake command">
<dt id="command:set_machine_flags">
<code class="sig-name descname">set_machine_flags</code><a class="headerlink" href="#command:set_machine_flags" title="Permalink to this definition"> 🔗</a></dt>
<dd><p><strong>Syntax:</strong></p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">set_machine_flags(</span><span class="nv">&lt;target&gt;</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Depending on the machine architecture and operating system this function sets correct “machine flag” for given target:</p>
<ul class="simple">
<li><p>on Windows it sets <code class="docutils literal notranslate"><span class="pre">/MACHINE:XX</span></code> link flag</p></li>
<li><p>on Linux and MacOS it sets <code class="docutils literal notranslate"><span class="pre">-mXX</span></code> flag for compilation and linking</p></li>
</ul>
<p>Additionally, on 32-bit platforms it also defines <code class="docutils literal notranslate"><span class="pre">MINT_32</span></code> macro to indicate to the Wolfram Library to use 32-bit machine integers.</p>
</dd></dl>

<dl class="cmake command">
<dt id="command:set_windows_static_runtime">
<code class="sig-name descname">set_windows_static_runtime</code><a class="headerlink" href="#command:set_windows_static_runtime" title="Permalink to this definition"> 🔗</a></dt>
<dd><p><strong>Syntax:</strong></p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">set_windows_static_runtime()</span><span class="w"></span>
</pre></div>
</div>
<p>Forces static runtime on Windows and does nothing on other platforms. See <a class="reference external" href="https://gitlab.kitware.com/cmake/community/wikis/FAQ#dynamic-replace">https://gitlab.kitware.com/cmake/community/wikis/FAQ#dynamic-replace</a> for details.</p>
</dd></dl>

<dl class="cmake command">
<dt id="command:set_min_windows_version">
<code class="sig-name descname">set_min_windows_version</code><a class="headerlink" href="#command:set_min_windows_version" title="Permalink to this definition"> 🔗</a></dt>
<dd><p><strong>Syntax:</strong></p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">set_min_windows_version(</span><span class="nv">&lt;target&gt;</span><span class="w"> </span><span class="nv">&lt;version&gt;</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Adds compile definitions to the specified target to set minimum supported Windows version. Does nothing on other platforms.
Supported values of <code class="docutils literal notranslate"><span class="pre">&lt;version&gt;</span></code> include: 7, 8, 8.1 and 10.</p>
</dd></dl>

<dl class="cmake command">
<dt id="command:set_default_compile_options">
<code class="sig-name descname">set_default_compile_options</code><a class="headerlink" href="#command:set_default_compile_options" title="Permalink to this definition"> 🔗</a></dt>
<dd><p><strong>Syntax:</strong></p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">set_default_compile_options(</span><span class="nv">&lt;target&gt;</span><span class="w"> </span><span class="nv">&lt;optimization&gt;</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Sets default paclet compile options including warning level and optimization. On Windows, also sets <code class="docutils literal notranslate"><span class="pre">/EHsc</span></code>. A call to this function may be used
as a starting point and new compile options can be added with consecutive calls to <span class="target" id="index-0-command:target_compile_options"></span><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">target_compile_options()</span></code>.</p>
</dd></dl>

<dl class="cmake command">
<dt id="command:install_dependency_files">
<code class="sig-name descname">install_dependency_files</code><a class="headerlink" href="#command:install_dependency_files" title="Permalink to this definition"> 🔗</a></dt>
<dd><p><strong>Syntax:</strong></p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">install_dependency_files(</span><span class="nv">&lt;paclet_name&gt;</span><span class="w"> </span><span class="nv">&lt;dependency_target&gt;</span><span class="w"> </span><span class="p">[</span><span class="nb">lib1</span><span class="p">,</span><span class="w"> </span><span class="nb">lib2</span><span class="p">,</span><span class="w"> </span><span class="p">...]</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Copies dependency libraries into paclet layout if the library type is SHARED (always copies on Windows).
Optional arguments are the libraries to copy (defaults to main target file plus its dependencies).</p>
<p><strong>Arguments:</strong></p>
<dl class="simple">
<dt><span class="target" id="index-0-variable:&lt;paclet_name&gt;"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">&lt;paclet_name&gt;</span></code></dt><dd><p>name of the paclet (i.e. name of the paclet’s layout root directory)</p>
</dd>
<dt><span class="target" id="index-0-variable:&lt;dependency_target&gt;"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">&lt;dependency_target&gt;</span></code></dt><dd><p>CMake target corresponding to a dependency of the paclet</p>
</dd>
<dt><span class="target" id="index-0-variable:lib1, lib2, ..."></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">lib1,</span> <span class="pre">lib2,</span> <span class="pre">...</span></code></dt><dd><p><em>[optional]</em> absolute paths to dynamic libraries on which the paclet depends and which should be copied to the paclet’s layout. If not provided,
this information will be deduces from the <code class="docutils literal notranslate"><span class="pre">&lt;dependency_target&gt;</span></code>.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="paclet-utilities">
<h2>Paclet Utilities<a class="headerlink" href="#paclet-utilities" title="Permalink to this headline"> 🔗</a></h2>
<p><code class="file docutils literal notranslate"><span class="pre">cmake/LLU/Wolfram/PacletUtilities.cmake</span></code> contains CMake functions for installing and packaging projects into proper <a class="reference internal" href="../index.html#term-paclet"><span class="xref std std-term">paclet</span></a>s.</p>
<dl class="cmake command">
<dt id="command:install_paclet_files">
<code class="sig-name descname">install_paclet_files</code><a class="headerlink" href="#command:install_paclet_files" title="Permalink to this definition"> 🔗</a></dt>
<dd><p><strong>Syntax:</strong></p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">install_paclet_files(</span><span class="w"></span>
<span class="w">        </span><span class="no">TARGET</span><span class="w"> </span><span class="nv">&lt;target&gt;</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="no">LLU_LOCATION</span><span class="w"> </span><span class="nb">path</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="no">PACLET_NAME</span><span class="w"> </span><span class="nb">name</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="no">PACLET_FILES_LOCATION</span><span class="w"> </span><span class="nb">path2</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="no">INSTALL_TO_LAYOUT</span><span class="p">]</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Configures the CMake <em>install</em> target for a paclet. The only required argument is <span class="target" id="index-0-variable:TARGET"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">TARGET</span></code> which should be followed by the main paclet
target (that defines the shared library). The <em>install</em> target configured with this function will copy the directory
passed as <span class="target" id="index-0-variable:PACLET_FILES_LOCATION"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">PACLET_FILES_LOCATION</span></code> into the location stored in <span class="target" id="index-0-variable:CMAKE_INSTALL_PREFIX"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>. It will also place the
<code class="file docutils literal notranslate"><span class="pre">PacletInfo.wl</span></code> in the appropriate location in the paclet and put the shared library under <code class="file docutils literal notranslate"><span class="pre">LibraryResources/&lt;system_id&gt;</span></code>.</p>
<p><strong>Arguments:</strong></p>
<dl class="simple">
<dt><span class="target" id="index-1-variable:TARGET"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">TARGET</span></code></dt><dd><p>name of the main target in the paclet’s CMakeLists.txt</p>
</dd>
<dt><span class="target" id="index-0-variable:LLU_LOCATION"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">LLU_LOCATION</span></code></dt><dd><p>path to LLU installation. This is needed because every paclet that uses the Wolfram Language part of the LLU API needs a copy of
<code class="file docutils literal notranslate"><span class="pre">LibraryLinkUtilities.wl</span></code> which is stored in the <code class="file docutils literal notranslate"><span class="pre">share</span></code> folder of LLU installation.</p>
</dd>
<dt><span class="target" id="index-0-variable:PACLET_NAME"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">PACLET_NAME</span></code></dt><dd><p><em>[optional]</em> if the name of the paclet is different than the name of the main paclet target, pass it here</p>
</dd>
<dt><span class="target" id="index-1-variable:PACLET_FILES_LOCATION"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">PACLET_FILES_LOCATION</span></code></dt><dd><p><em>[optional]</em> location of the Wolfram Language source files in the paclet, by default it is assumed as <code class="docutils literal notranslate"><span class="pre">${CMAKE_CURRENT_SOURCE_DIR}/PACLET_NAME</span></code></p>
</dd>
<dt><span class="target" id="index-0-variable:INSTALL_TO_LAYOUT"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">INSTALL_TO_LAYOUT</span></code></dt><dd><p><em>[optional]</em> a flag indicating whether the complete paclet layout (what the <em>install</em> target produces) should be also copied to the <code class="file docutils literal notranslate"><span class="pre">SystemFiles/Links</span></code>
directory of current Wolfram Language installation (the one used for paclet configuration)</p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="cmake command">
<dt id="command:add_paclet_target">
<code class="sig-name descname">add_paclet_target</code><a class="headerlink" href="#command:add_paclet_target" title="Permalink to this definition"> 🔗</a></dt>
<dd><p><strong>Syntax:</strong></p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">add_paclet_target(</span><span class="nv">&lt;target&gt;</span><span class="w"></span>
<span class="w">        </span><span class="no">NAME</span><span class="w"> </span><span class="nb">name</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="no">VERIFY</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="no">INSTALL</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="no">TEST_FILE</span><span class="w"> </span><span class="nb">file</span><span class="p">]</span><span class="w"></span>
<span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Create a target that produces a proper .paclet file for the project. It takes a paclet layout, produced by the <em>install</em> target, packs it into a .paclet
file, optionally verifies contents, installs to the user paclet directory and run tests.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For this function to work, <em>install</em> target must be built beforehand and wolframscript from Wolfram Language v12.1 or later must be available.</p>
</div>
<p><strong>Arguments:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&lt;target&gt;</span></code></dt><dd><p>name for the new target, can be anything</p>
</dd>
<dt><span class="target" id="index-0-variable:NAME"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">NAME</span></code></dt><dd><p>name of the paclet, it must match the name of the paclet’s layout root directory</p>
</dd>
<dt><span class="target" id="index-0-variable:VERIFY"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">VERIFY</span></code></dt><dd><p><em>[optional]</em> verify contents of the newly created .paclet file</p>
</dd>
<dt><span class="target" id="index-0-variable:INSTALL"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">INSTALL</span></code></dt><dd><p><em>[optional]</em> install .paclet file to the user paclet directory, see <a class="reference external" href="https://reference.wolfram.com/language/ref/PacletInstall">PacletInstall</a> for details</p>
</dd>
<dt><span class="target" id="index-0-variable:TEST_FILE"></span><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">TEST_FILE</span></code></dt><dd><p><em>[optional]</em> provide a path to a test file, if your paclet has one. There is no magic here, CMake will simply ask wolframscript to evaluate the file
you provided. What will actually happen fully depends on the contents of your test file.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="paclet_use.html" class="btn btn-neutral" title="Use in paclets" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Wolfram Research.
      Last updated on Aug 09, 2022.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and ❤️  using a custom <a href="https://github.com/LinxiFan/Sphinx-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="../_static/js/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>